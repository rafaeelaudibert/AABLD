<% content_for :title do %>
  Usuários
<% end %>

<p id="notice"><%= notice %></p>

<div class="table-responsive">
  <table class="table table-bordered table-md table-striped">
    <tbody>
      <tr>
        <th>Nome</th>
        <th>Email</th>
        <th>CPF</th>
        <th>Universidade</th>
        <th>Ações</th>
      </tr>
      <% @users.each do |user| %>
        <tr>
          <td class="d-none d-md-block">
            <%= user.full_name %>
            <div class="table-links">
              <%= link_to 'Mostrar', user %>
              <div class="bullet"></div>
              <%= link_to 'Apagar', user, method: :delete, class: 'text-danger', data: { confirm: 'Are you sure?' } %>
            </div>
          </td>
          <td><%= user.email %></td>
          <td><%= user.cpf %></td>
          <td><%= user.university.abbreviation %></td>
          <td>
            <%= link_to('Visualizar Transações', user_transactions_path(user), class: 'btn btn-primary') %>
            <%= link_to('Criar Transação mensal', new_user_transaction_path(user), class: "btn #{user.did_monthly_transaction? ? 'btn-secondary disabled' : 'btn-success'}") %>
          </td>
        </tr>
      <% end %> 
    </tbody>
  </table>
</div>

<%= content_for :pagination do %>
  <div class="row">
    <div class="col-xs-12 col-sm-6 pb-3">
        <%= link_to 'Convidar usuário', new_user_invitation_path, class: 'btn btn-success' %>
    </div>
    <% if @pagy.pages > 1 %>
      <div class="col-xs-12 col-sm-6">
        <%== paginate @pagy %>
      </div>
    <% end %>
  </div>
<% end %>